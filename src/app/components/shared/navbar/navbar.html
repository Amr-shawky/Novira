<nav class="bg-white fixed top-0 left-0 w-full z-50 shadow-sm">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-16 items-center">
      <!-- Logo -->
      <div class="flex items-center">
        <a routerLink="/" class="flex items-center space-x-3">
          <img
            src="imgs/logo.png"
            alt="Novira"
            class="w-32 h-auto object-contain"
          />
        </a>
      </div>

      <!-- Navigation Links -->
      <div class="flex items-center space-x-6">
        <a [routerLink]="['']" class="text-gray-700 hover:text-indigo-600">Home</a>
        <a [routerLink]="['courses']" class="text-gray-700 hover:text-indigo-600">Explore</a>

        @if (isLoggedIn) {
        <a routerLink="/profile" class="text-gray-700 hover:text-indigo-600"
          >My Courses</a
        >
        }

        <a
          routerLink="/certificates"
          class="text-gray-700 hover:text-indigo-600"
          >Certificates</a
        >

        <!-- Dropdown -->
        <div class="relative group">
          <button
            class="text-gray-700 hover:text-indigo-600 flex items-center space-x-1"
          >
            <span>More</span>
            <mat-icon>expand_more</mat-icon>
          </button>
          <div
            class="absolute hidden group-hover:block bg-white border rounded shadow-md py-1 w-40"
          >
            <a
              routerLink="/about"
              class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"
              >About Us</a
            >
            <a
              routerLink="/contact"
              class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"
              >Contact</a
            >
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="flex items-center space-x-3">
        <!-- Search -->
<div class="relative">
  <input type="text"
         placeholder="Search courses..."
         [(ngModel)]="searchTerm"
         (input)="onSearchChange()"
         (keydown.enter)="goToSearchPage()"
         class="border px-3 py-2 rounded-lg w-64">

  @if (filteredCourses.length > 0 && searchTerm) {
    <ul class="absolute bg-white border rounded-lg shadow-lg w-64 mt-1 max-h-60 overflow-auto z-50">
      @for (course of filteredCourses; track course.id) {
        <li (click)="goToCourse(course.id)"
            class="px-3 py-2 hover:bg-gray-100 cursor-pointer">
          {{ course.courseTitle }}
        </li>
      }
    </ul>
  }
</div>


        <!-- Notifications -->
        <div class="relative">
          <button
            (click)="toggleNotifications()"
            class="p-2 rounded-full hover:bg-gray-100"
          >
            <mat-icon>notifications</mat-icon>
          </button>

          @if (notificationsOpen) {
          <div
            class="absolute right-0 mt-2 w-72 bg-white border rounded shadow-lg z-40"
          >
            <div class="p-3 text-sm text-gray-700">No new notifications</div>
          </div>
          }
        </div>

        <!-- Login / Signup -->
        @if (!isLoggedIn) {
        <div class="flex items-center space-x-3">
          <a
            routerLink="/login"
            class="px-4 py-2 border border-indigo-600 text-indigo-600 rounded-full text-sm font-medium hover:bg-indigo-50 transition"
          >
            Log In
          </a>
          <a
            routerLink="/signup"
            class="px-4 py-2 bg-indigo-600 text-white rounded-full text-sm font-medium hover:bg-indigo-500 transition"
          >
            Sign Up
          </a>
        </div>
        }

        <!-- User Menu -->
        @if (isLoggedIn) {
        <div class="relative">
          <button
            (click)="toggleProfileMenu()"
            class="flex items-center space-x-2"
          >
            @if (user.avatarUrl) {
            <img
              [src]="user.avatarUrl"
              alt="avatar"
              class="h-8 w-8 rounded-full object-cover"
            />
            } @else {
            <div
              class="h-8 w-8 rounded-full bg-indigo-100 text-indigo-700 flex items-center justify-center text-sm font-medium"
            >
              {{ (user.name || "U").split(" ")[0].charAt(0) }}
            </div>
            }
            <span class="text-gray-700">{{ user.name }}</span>
          </button>

          @if (profileMenuOpen) {
          <div
            class="absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg z-40"
          >
            <a
              [routerLink]="['/profile']"
              class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"
              >Profile</a
            >
            <a
              routerLink="/settings"
              class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"
              >Settings</a
            >
            <button
              (click)="logout()"
              class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50"
            >
              Logout
            </button>
          </div>
          }
        </div>
        }
        <!-- <label class="inline-flex items-center cursor-pointer">
          <input type="checkbox" value="" class="sr-only peer" />
          <div
            class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"
          ></div>
        </label> -->
      </div>
    </div>
  </div>
</nav>
